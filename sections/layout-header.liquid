<style>
  .customHeader .customHeader__inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .customHeader .customHeader__inner .iconsBlock {
    display: flex;
    gap: 25px;
    align-items: center;
  }
  .customHeader a {
    color: #222222 !important;
    font-family: Manrope !important;
    text-decoration: none;
    transition: all 0.3s;
  }
  .customHeader a:hover {
    color: #222222 !important;
    opacity: 0.8;
  }
  .customHeader .customHeader__inner .iconsBlock .greenButton {
    color: #fff !important;
    background-color: #115C11;
    border: 2px solid #115C11;
    padding: 12px 32px;
  }
  .customHeader .customHeader__inner .iconsBlock .greenButton:hover {
    background-color: transparent !important;
    border: 2px solid #2c2d2c !important;
    color: #2c2d2c !important;
    transition: all 0.3s;
  }
  .customHeader .customHeader__inner .iconsBlock .greenButton:hover span {
    color: #115C11 !important;
  }
  .customHeader .customHeader__inner .iconsBlock path {
    stroke: #222222 !important;
  }
  .customHeader .customHeader__inner .navBlock {
    display: flex;
    align-items: center;
    gap: 40px;
  }
  .customHeader .customHeader__inner .navBlock .navMenu {
    display: flex;
    align-items: center;
    gap: 32px;
  }
  .customHeader .icon-class {
    color: #222222 !important;
  }
  .customHeader.transparent-header {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: transparent;
    transition: all 0.3s ease;
  }
  .customHeader.transparent-header a {
    color: #fff !important;
  }
  .customHeader.transparent-header a:hover {
    color: #fff !important;
    opacity: 0.8;
  }
  .customHeader.transparent-header .icon-class {
    color: #fff !important;
  }
  .customHeader.transparent-header .customHeader__inner .iconsBlock .greenButton {
    color: #2c2d2c !important;
    background-color: #fff;
    border: 2px solid #fff;
  }
  .customHeader.transparent-header .customHeader__inner .iconsBlock .greenButton:hover {
    background-color: transparent !important;
    border: 2px solid #fff !important;
    color: #fff !important;
  }
  .customHeader.transparent-header .customHeader__inner .iconsBlock path {
    stroke: #fff !important;
  }
  .customHeader.transparent-header .customHeader__inner .iconsBlock .greenButton:hover span {
    color: #2c2d2c !important;
  }

  .mobile-icons-and-menu {
    display: none;
  }
  .mobile-menu-overlay,
  .mobile-menu {
    display: none;
  }
  .mobile-menu-button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
  }
  .mobile-menu-button svg {
    width: 24px;
    height: 24px;
  }

  @media (max-width: 768px) {
    .customHeader .customHeader__inner .navBlock .navMenu {
      display: none !important;
    }
    .customHeader__inner .iconsBlock {
      display: none !important;
    }

    .customHeader.transparent-header a {
      color: #2c2d2c !important;
    }
    .customHeader.transparent-header a:hover {
      color: #2c2d2c !important;
      opacity: 0.8;
    }

    .mobile-icons-and-menu {
      display: flex !important;
      align-items: center;
      gap: 15px;
    }
    .mobile-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: 65%;
      height: 100vh;
      background: #fff;
      z-index: 1001;
      transition: right 0.3s ease;
      padding: 40px 0 0 20px;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      display: block !important;
    }
    .mobile-menu.active {
      right: 0;
    }
    .mobile-menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
      display: block !important;
    }
    .mobile-menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .mobile-menu-content {
      margin-top: 30px;
    }
    .mobile-menu-nav {
      display: flex;
      flex-direction: column;
      gap: 20px;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .mobile-menu-nav a {
      color: #222222 !important;
      font-size: 18px;
      font-weight: 500;
      text-decoration: none;
    }
    .mobile-menu-close {
      position: absolute;
      top: 20px;
      left: 10px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
    }
  }
</style>

<div class="customHeader pageWidth">
  <div class="customHeader__inner h-20 md:h-32 flex justify-between items-center">
    <div class="flex items-center space-x-6 navBlock">
      {% if section.settings.logo != blank %}
        <a href="{{ routes.root_url }}" class="inline-block">
          <img src="{{ section.settings.logo | image_url: width: 200 }}" alt="{{ shop.name }}">
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="inline-block text-2xl lg:text-3xl font-bold">
          {{ shop.name }}
        </a>
      {% endif %}
      <div class="hidden md:block">
        {% render 'layout-menu'
          , class: 'space-x-4 navMenu' %}
      </div>
    </div>

    {% assign link_class = 'flex flex-col justify-center items-center text-sm text-gray-600 hover:text-black font-medium transition duration-150 p-2' %}
    {% assign icon_class = 'w-auto h-7 text-black mb-2' %}

    <div class="hidden md:flex space-x-2 lg:space-x-6 iconsBlock">
      <a href="{{ routes.search_url }}" class="{{ link_class }}">
        {% render 'icon-search'
          , class: icon_class %}
      </a>
      {% if shop.customer_accounts_enabled %}
        <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}" class="{{ link_class }}">
          {% render 'icon-account'
            , class: icon_class %}
        </a>
      {% endif %}
      <a href="{{ routes.cart_url }}" class="{{ link_class }} relative">
        {% render 'icon-cart'
          , class: icon_class %}
        {% if cart.item_count > 0 %}
          <div class="w-5 h-5 flex justify-center items-center bg-black text-white text-xs border border-white rounded-full absolute top-0 right-0">
            {{ cart.item_count }}
          </div>
        {% endif %}
      </a>
      {% if section.settings.button_text != blank %}
        <a href="{{ section.settings.button_link }}" class="greenButton">{{ section.settings.button_text }}</a>
      {% endif %}
    </div>

    <div class="mobile-icons-and-menu">
      {% if shop.customer_accounts_enabled %}
        <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}" class="{{ link_class }} !mb-0">
          {% render 'icon-account'
            , class: icon_class %}
        </a>
      {% endif %}
      <button class="mobile-menu-button" aria-label="Open menu">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none">
          <path
            d="M3 12H21"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round" />
          <path
            d="M3 6H21"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round" />
          <path
            d="M3 18H21"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round" />
        </svg>
      </button>
    </div>
  </div>

  <div class="mobile-menu-overlay"></div>
  <div class="mobile-menu">
    <button class="mobile-menu-close" aria-label="Close menu">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none">
        <path
          d="M18 6L6 18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round" />
        <path
          d="M6 6L18 18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round" />
      </svg>
    </button>
    <div class="mobile-menu-content">
      <ul class="mobile-menu-nav">
        {% for link in linklists.main-menu.links %}
          <li>
            <a href="{{ link.url }}">{{ link.title }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const heroSection = document.querySelector('.js-hero-section');
    const header = document.querySelector('.customHeader');
    if (!header) {
      console.error('Header not found');
      return;
    }
    
    const logo = header.querySelector('a img');
    const transparentLogoSrc = "{{ section.settings.transparent_logo | image_url: width: 200 }}";
    
    if (heroSection && header) {
      header.classList.add('transparent-header');
      if (logo && transparentLogoSrc) {
        logo.src = transparentLogoSrc;
      }
    } else {
      const regularLogoSrc = "{{ section.settings.logo | image_url: width: 200 }}";
      if (logo && regularLogoSrc) {
        logo.src = regularLogoSrc;
      }
    }
  });
  
  document.addEventListener('DOMContentLoaded', function() {
    const menuButton = document.querySelector('.mobile-menu-button');
    const closeButton = document.querySelector('.mobile-menu-close');
    const mobileMenu = document.querySelector('.mobile-menu');
    const overlay = document.querySelector('.mobile-menu-overlay');
    
    if (!menuButton || !closeButton || !mobileMenu || !overlay) {
      console.error('Mobile menu elements not found');
      return;
    }
    
    function openMenu() {
      mobileMenu.classList.add('active');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeMenu() {
      mobileMenu.classList.remove('active');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }
    
    menuButton.addEventListener('click', openMenu);
    closeButton.addEventListener('click', closeMenu);
    overlay.addEventListener('click', closeMenu);
  });
</script>

{% schema %}
  {
    "name": "t:sections.header.name",
    "settings": [
      {
        "type": "image_picker",
        "id": "logo",
        "label": "Logo"
      },
      {
        "type": "image_picker",
        "id": "transparent_logo",
        "label": "Transparent Logo"
      },
      {
        "type": "paragraph",
        "content": "t:sections.header.settings.paragraph"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button Text",
        "default": "Contact Us"
      }, {
        "type": "url",
        "id": "button_link",
        "label": "Button Link"
      }
    ]
  }
{% endschema %}