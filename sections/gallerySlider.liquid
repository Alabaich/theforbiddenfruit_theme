<style>
  .gs-gallery-slider {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 50px;
    align-items: center;
  }

  .gs-gallery-slider .heading {
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 1000px;
    width: 100%;
  }

  .gs-gallery-slider .splide,
  .gs-gallery-slider .splide__track,
  .gs-gallery-slider .splide__list,
  .gs-gallery-slider .splide__slide {
    visibility: visible !important;
  }

  .gs-gallery-slider .splide__slide img {
    height: 14rem;
    object-fit: cover;
    border-radius: 10px;
  }

  .gs-gallery-slider .splide {
    width: 100%;
    min-height: 10rem;
  }

  .gs-gallery-slider .splide__list {
    min-height: 10rem;
    display: flex;
    gap: 15px;
    align-items: center;
  }

  .gs-gallery-slider .splide__slide div[style] {
    border-radius: 8px;
    color: #666;
    font-weight: bold;
  }
</style>

<div class="gs-gallery-slider pageWidth">
  <div class="heading">
    {% if section.settings.heading != blank %}
      <h1>{{ section.settings.heading }}</h1>
    {% endif %}

    {% if section.settings.subtitle != blank %}
      <p class="subtitle">{{ section.settings.subtitle }}</p>
    {% endif %}
  </div>

  <div id="gallery-splide" class="splide">
    <div class="splide__track">
      <ul class="splide__list">
        {% for block in section.blocks %}
          <li class="splide__slide">
            {% if block.settings.slide_image != blank %}
              <img src="{{ block.settings.slide_image | img_url: '1200x' }}" alt="{{ block.settings.slide_image.alt }}">
            {% else %}
              <div style="background: #f0f0f0; height: 14rem; width: 15rem; display: flex; align-items: center; justify-content: center;">
                Slide {{ forloop.index }}
              </div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof Splide !== 'undefined') {
      var gallerySplide = new Splide('#gallery-splide', {
        type: 'loop',
        height: '14rem',
        focus: 'left',
        autoWidth: true,
        arrows: false,
        gap: '15px',
        pagination: false,
        autoplay: true,
        interval: 3000,
        pauseOnHover: false,
        pauseOnFocus: false,
        waitForTransition: false
      });
      
      gallerySplide.mount();
    }
  });
</script>

{% schema %}
  {
    "name": "Gallery Slider",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Gallery Title"
      }, {
        "type": "text",
        "id": "subtitle",
        "label": "Subtitle",
        "default": "Your subtitle text here"
      }
    ],
    "blocks": [
      {
        "type": "image_slide",
        "name": "Image Slide",
        "settings": [
          {
            "type": "image_picker",
            "id": "slide_image",
            "label": "Slide Image"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Gallery Slider",
        "category": "Image",
        "blocks": [
          {
            "type": "image_slide"
          }
        ]
      }
    ]
  }
{% endschema %}