<style>
  .selected-products-section {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 50px;
    align-items: center;
  }

  .selected-products-heading {
    text-align: center;
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: 20px;
    max-width: 1000px;
    width: 100%;
  }

  .selected-products-heading .subtitle {
    text-align: center;
    margin: 0;
  }

  .products-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    width: 100%;
  }

  .product-card {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .product-image {
    width: 100%;
    height: 360px;
    border-radius: 10px;
    overflow: hidden;
  }

  .product-image a {
    display: block;
    width: 100%;
    height: 100%;
  }

  .product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .product-image:hover img {
    transform: scale(1.05);
  }

  .product-tag {
    color: #616161;
    font-family: Onest;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    text-transform: capitalize;
    min-height: 21px;
    margin: 0;
  }

  .product-title {
    color: #2c2d2c;
    font-family: Manrope;
    font-size: 22px;
    font-style: normal;
    font-weight: 600;
    text-transform: capitalize;
    margin: 0;
  }

  .product-price-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 15px;
  }

  .product-prices {
    display: flex;
    flex-direction: column;
    gap: 5px;
  }

  .product-price {
    color: #2c2d2c;
    font-family: 'Manrope'
    , sans-serif;
    font-size: 20px;
    font-weight: 700;
  }

  .product-compare-price {
    color: #616161;
    font-family: 'Manrope'
    , sans-serif;
    font-size: 16px;
    text-decoration: line-through;
  }

  .greenButton {
    padding: 12px 32px;
    transition: background-color 0.3s ease;
  }

  @media (max-width: 968px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
  }

  @media (max-width: 768px) {
    .selected-products-heading h2 {
      font-size: 28px;
    }

    .products-grid {
      grid-template-columns: 1fr;
      gap: 25px;
    }

    .product-image {
      height: 250px;
    }
  }
</style>

<section class="selected-products-section pageWidth">
  <div class="selected-products-heading">
    {% if section.settings.heading != blank %}
      <h1>{{ section.settings.heading }}</h1>
    {% endif %}

    {% if section.settings.subtitle != blank %}
      <p class="subtitle">{{ section.settings.subtitle }}</p>
    {% endif %}
  </div>

  <div class="products-grid">
    {% for product in section.settings.product_list limit: 3 %}
      <div class="product-card">
        <div class="product-image">
          <a href="{{ product.url }}">
            {% if product.featured_image %}
              <img
                src="{{ product.featured_image | img_url: '400x400' }}"
                alt="{{ product.title }}"
                loading="lazy">
            {% else %}
              <div style="background: #f0f0f0; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 12px;"></div>
            {% endif %}
          </a>
        </div>

        {% if section.settings.show_tag %}
          <p class="product-tag">
            {% if product.collections != empty %}
              {{ product.collections.first.title }}
            {% endif %}
          </p>
        {% endif %}

        <h3 class="product-title">
          <a href="{{ product.url }}" style="color: inherit; text-decoration: none;">
            {{ product.title }}
          </a>
        </h3>

        <div class="product-price-container">
          <div class="product-prices">
            <span class="product-price">{{ product.price | money }}</span>
            {% if product.compare_at_price > product.price %}
              <span class="product-compare-price">{{ product.compare_at_price | money }}</span>
            {% endif %}
          </div>

          <a href="{{ product.url }}" class="greenButton">
            {{ section.settings.button_text }}
          </a>
        </div>
      </div>
    {% else %}
      {% for i in (1..3) %}
        <div class="product-card">
          <div class="product-image">
            <a href="#">
              <div style="background: #f0f0f0; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 12px;">
                <span>Product {{ i }}</span>
              </div>
            </a>
          </div>

          {% if section.settings.show_tag %}
            <p class="product-tag">Collection</p>
          {% endif %}

          <h3 class="product-title">
            <a href="#" style="color: inherit; text-decoration: none;">
              Product Title {{ i }}
            </a>
          </h3>

          <div class="product-price-container">
            <div class="product-prices">
              <span class="product-price">$29.99</span>
              <span class="product-compare-price">$39.99</span>
            </div>

            <a href="#" class="greenButton">
              {{ section.settings.button_text }}
            </a>
          </div>
        </div>
      {% endfor %}
    {% endfor %}
  </div>
</section>

{% schema %}
  {
    "name": "Selected Products",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Featured Products"
      },
      {
        "type": "text",
        "id": "subtitle",
        "label": "Subtitle",
        "default": "Discover our best selling products"
      },
      {
        "type": "product_list",
        "id": "product_list",
        "label": "Products",
        "limit": 3
      },
      {
        "type": "checkbox",
        "id": "show_tag",
        "label": "Show product collection",
        "default": true
      }, {
        "type": "text",
        "id": "button_text",
        "label": "Button Text",
        "default": "Shop Now"
      }
    ],
    "presets": [
      {
        "name": "Selected Products",
        "category": "Custom"
      }
    ]
  }
{% endschema %}